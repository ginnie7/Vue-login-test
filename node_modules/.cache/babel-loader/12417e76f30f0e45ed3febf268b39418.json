{"remainingRequest":"/Users/Ginius/Desktop/Login/vue-protected-routes/node_modules/babel-loader/lib/index.js!/Users/Ginius/Desktop/Login/vue-protected-routes/node_modules/eslint-loader/index.js??ref--13-0!/Users/Ginius/Desktop/Login/vue-protected-routes/src/router.js","dependencies":[{"path":"/Users/Ginius/Desktop/Login/vue-protected-routes/src/router.js","mtime":1557618486518},{"path":"/Users/Ginius/Desktop/Login/vue-protected-routes/node_modules/cache-loader/dist/cjs.js","mtime":1557593994339},{"path":"/Users/Ginius/Desktop/Login/vue-protected-routes/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/Ginius/Desktop/Login/vue-protected-routes/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport Router from 'vue-router';\nimport store from './store';\nVue.use(Router);\nvar router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [{\n    path: '/login',\n    name: 'login',\n    component: function component() {\n      return import('./views/Login.vue');\n    }\n  }, {\n    path: '/user',\n    name: 'user',\n    component: function component() {\n      return import('./views/User.vue');\n    }\n  }, {\n    path: '*',\n    redirect: '/login'\n  }]\n});\nrouter.beforeEach(function (to, from, next) {\n  store.dispatch('fetchAccessToken');\n\n  if (to.fullPath === '/user') {\n    if (!store.state.accessToken) {\n      next('/login');\n    }\n  }\n\n  if (to.fullPath === '/login') {\n    if (store.state.accessToken) {\n      next('/user');\n    }\n  }\n\n  next();\n});\nexport default router;",{"version":3,"sources":["/Users/Ginius/Desktop/Login/vue-protected-routes/src/router.js"],"names":["Vue","Router","store","use","router","mode","base","process","env","BASE_URL","routes","path","name","component","redirect","beforeEach","to","from","next","dispatch","fullPath","state","accessToken"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEAF,IAAIG,GAAJ,CAAQF,MAAR;AAEA,IAAMG,SAAS,IAAIH,MAAJ,CAAW;AACxBI,QAAM,SADkB;AAExBC,QAAMC,QAAQC,GAAR,CAAYC,QAFM;AAGxBC,UAAQ,CACN;AACEC,UAAM,QADR;AAEEC,UAAM,OAFR;AAGEC,eAAW;AAAA,aAAM,OAAO,mBAAP,CAAN;AAAA;AAHb,GADM,EAMN;AACEF,UAAM,OADR;AAEEC,UAAM,MAFR;AAGEC,eAAW;AAAA,aAAM,OAAO,kBAAP,CAAN;AAAA;AAHb,GANM,EAWN;AACEF,UAAM,GADR;AAEEG,cAAU;AAFZ,GAXM;AAHgB,CAAX,CAAf;AAqBAV,OAAOW,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpChB,QAAMiB,QAAN,CAAe,kBAAf;;AACA,MAAIH,GAAGI,QAAH,KAAgB,OAApB,EAA6B;AAC3B,QAAI,CAAClB,MAAMmB,KAAN,CAAYC,WAAjB,EAA8B;AAC5BJ,WAAK,QAAL;AACD;AACF;;AACD,MAAIF,GAAGI,QAAH,KAAgB,QAApB,EAA8B;AAC5B,QAAIlB,MAAMmB,KAAN,CAAYC,WAAhB,EAA6B;AAC3BJ,WAAK,OAAL;AACD;AACF;;AACDA;AACD,CAbD;AAeA,eAAed,MAAf","sourcesContent":["import Vue from 'vue';\nimport Router from 'vue-router';\nimport store from './store';\n\nVue.use(Router);\n\nconst router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [\n    {\n      path: '/login',\n      name: 'login',\n      component: () => import('./views/Login.vue')\n    },\n    {\n      path: '/user',\n      name: 'user',\n      component: () => import('./views/User.vue')\n    },\n    {\n      path: '*',\n      redirect: '/login'\n    }\n  ]\n});\n\nrouter.beforeEach((to, from, next) => {\n  store.dispatch('fetchAccessToken');\n  if (to.fullPath === '/user') {\n    if (!store.state.accessToken) {\n      next('/login');\n    }\n  }\n  if (to.fullPath === '/login') {\n    if (store.state.accessToken) {\n      next('/user');\n    }\n  }\n  next();\n});\n\nexport default router;\n"]}]}